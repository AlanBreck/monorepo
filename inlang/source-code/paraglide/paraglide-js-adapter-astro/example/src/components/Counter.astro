---
import * as m from "../paraglide/messages"
---

<div class="counter">
    <span class="count" data-count="0" >{m.count({ count: 0})}</span>
    <button class="increment">+</button>
</div>

<script>
    import * as m from "../paraglide/messages"
    const counters = document.querySelectorAll('.counter');

    for (const counter of counters) {
            const count = counter.querySelector('.count');
            const increment = counter.querySelector('.increment');
            if(!(increment instanceof HTMLButtonElement)) {
                throw new Error("increment is not a button");
            }



            increment.addEventListener('click', () => {
                //@ts-ignore
                const value = parseInt(count.dataset.count!);
                 //@ts-ignore
                count.dataset.count = value + 1;
                 //@ts-ignore
                count.innerHTML = m.count({ count: value + 1});
            });
    }
</script>